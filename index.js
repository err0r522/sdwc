const nF=require("node-fetch");module.exports = class Client{constructor(a={id:"",token:"",url:""}){let{id:b,token:c,url:d}=a;if(a.id&&"string"==typeof b&&c&&"string"==typeof c)d=`https://discord.com/api/webhooks/${b}/${c}`;else if(!d)throw new Error("No authenfication data was specified.");this.f=this.fetch=async()=>{let a=await(await nF(d)).json();if(1!=a.type)throw new Error("Only incoming webhooks are supported.");return this.id=a.id,this.name=a.name||void 0,this.avatar=a.avatar||void 0,this.channel_id=a.channel_id||void 0,this.guild_id=a.guild_id||void 0,this.application_id=a.guild_id||void 0,a},this.e=this.execute=async(a={content:"",username:"",avatar_url:"",tts:!1,embeds:[],allowed_mentions:{},attachments:[]},b=!1,c=!1,e,g="")=>{if(!a||"object"!=typeof a)throw new Error("Data must be an object");let h,i=await nF(d+((b||g?"?":"")+(b?"wait=true":"")+(b&&g?"&":"")+(g?`thread_id=${g}`:"")),{method:"post",body:c?a:JSON.stringify(a),headers:c?e:{"Content-Type":"application/json"}});if(200!==i.status)throw Error(await i.text());return b&&(h=await i.json()),h}}}